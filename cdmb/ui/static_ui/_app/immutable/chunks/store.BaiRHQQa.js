import{s as S,r as C,i as D,f as b,l as z,a3 as H,P as ve,p as E,q as I,u as g,L as M,v as Q,e as V,c as W,b as X,F,R as Z,C as _,x,y as $,z as ee,H as se,D as re,a5 as De,E as N}from"./scheduler.8EYOJlnQ.js";import{S as je,i as Ne,g as de,b as h,e as te,t as c,h as G}from"./index.BEIljnE9.js";import{g as le,$ as q}from"./runtime.BaKyRKnx.js";import{t as qe}from"./bundle-mjs.CAuFFVoU.js";import{d as p,w as v}from"./index.BJGfC3rd.js";const ss=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function rs(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ee(e){let s=e[1],r,a,d=e[1]&&U(e);return{c(){d&&d.c(),r=C()},l(t){d&&d.l(t),r=C()},m(t,n){d&&d.m(t,n),D(t,r,n),a=!0},p(t,n){t[1]?s?S(s,t[1])?(d.d(1),d=U(t),s=t[1],d.c(),d.m(r.parentNode,r)):d.p(t,n):(d=U(t),s=t[1],d.c(),d.m(r.parentNode,r)):s&&(d.d(1),d=null,s=t[1])},i(t){a||(c(d,t),a=!0)},o(t){h(d,t),a=!1},d(t){t&&b(r),d&&d.d(t)}}}function Fe(e){let s=e[1],r,a=!1,d,t=e[1]&&A(e);return{c(){t&&t.c(),r=C()},l(n){t&&t.l(n),r=C()},m(n,o){t&&t.m(n,o),D(n,r,o),d=!0},p(n,o){n[1]?s?S(s,n[1])?(t.d(1),t=A(n),s=n[1],t.c(),a&&(a=!1,c(t)),t.m(r.parentNode,r)):(a&&(a=!1,c(t)),t.p(n,o)):(t=A(n),s=n[1],t.c(),c(t),t.m(r.parentNode,r)):s&&(a=!0,de(),h(t,1,1,()=>{t=null,s=n[1],a=!1}),te())},i(n){d||(c(t,n),d=!0)},o(n){h(t,n),d=!1},d(n){n&&b(r),t&&t.d(n)}}}function U(e){let s,r,a,d,t;const n=e[15].default,o=Q(n,e,e[14],null);let u=[{role:e[4]},e[9],{class:e[8]}],f={};for(let i=0;i<u.length;i+=1)f=E(f,u[i]);return{c(){s=V(e[1]),o&&o.c(),this.h()},l(i){s=W(i,(e[1]||"null").toUpperCase(),{role:!0,class:!0});var m=X(s);o&&o.l(m),m.forEach(b),this.h()},h(){F(e[1])(s,f)},m(i,m){D(i,s,m),o&&o.m(s,null),e[27](s),a=!0,d||(t=[Z(r=e[2].call(null,s,e[3])),_(s,"click",e[21]),_(s,"mouseenter",e[22]),_(s,"mouseleave",e[23]),_(s,"focusin",e[24]),_(s,"focusout",e[25])],d=!0)},p(i,m){o&&o.p&&(!a||m[0]&16384)&&x(o,n,i,i[14],a?ee(n,i[14],m,null):$(i[14]),null),F(i[1])(s,f=le(u,[(!a||m[0]&16)&&{role:i[4]},m[0]&512&&i[9],(!a||m[0]&256)&&{class:i[8]}])),r&&se(r.update)&&m[0]&8&&r.update.call(null,i[3])},i(i){a||(c(o,i),a=!0)},o(i){h(o,i),a=!1},d(i){i&&b(s),o&&o.d(i),e[27](null),d=!1,re(t)}}}function A(e){let s,r,a,d,t,n;const o=e[15].default,u=Q(o,e,e[14],null);let f=[{role:e[4]},e[9],{class:e[8]}],i={};for(let m=0;m<f.length;m+=1)i=E(i,f[m]);return{c(){s=V(e[1]),u&&u.c(),this.h()},l(m){s=W(m,(e[1]||"null").toUpperCase(),{role:!0,class:!0});var k=X(s);u&&u.l(k),k.forEach(b),this.h()},h(){F(e[1])(s,i)},m(m,k){D(m,s,k),u&&u.m(s,null),e[26](s),d=!0,t||(n=[Z(r=e[2].call(null,s,e[3])),_(s,"click",e[16]),_(s,"mouseenter",e[17]),_(s,"mouseleave",e[18]),_(s,"focusin",e[19]),_(s,"focusout",e[20])],t=!0)},p(m,k){e=m,u&&u.p&&(!d||k[0]&16384)&&x(u,o,e,e[14],d?ee(o,e[14],k,null):$(e[14]),null),F(e[1])(s,i=le(f,[(!d||k[0]&16)&&{role:e[4]},k[0]&512&&e[9],(!d||k[0]&256)&&{class:e[8]}])),r&&se(r.update)&&k[0]&8&&r.update.call(null,e[3])},i(m){d||(c(u,m),m&&De(()=>{d&&(a||(a=G(s,e[5],e[6],!0)),a.run(1))}),d=!0)},o(m){h(u,m),m&&(a||(a=G(s,e[5],e[6],!1)),a.run(0)),d=!1},d(m){m&&b(s),u&&u.d(m),e[26](null),m&&a&&a.end(),t=!1,re(n)}}}function Ue(e){let s,r,a,d;const t=[Fe,Ee],n=[];function o(u,f){return u[5]&&u[7]?0:u[7]?1:-1}return~(s=o(e))&&(r=n[s]=t[s](e)),{c(){r&&r.c(),a=C()},l(u){r&&r.l(u),a=C()},m(u,f){~s&&n[s].m(u,f),D(u,a,f),d=!0},p(u,f){let i=s;s=o(u),s===i?~s&&n[s].p(u,f):(r&&(de(),h(n[i],1,1,()=>{n[i]=null}),te()),~s?(r=n[s],r?r.p(u,f):(r=n[s]=t[s](u),r.c()),c(r,1),r.m(a.parentNode,a)):r=null)},i(u){d||(c(r),d=!0)},o(u){h(r),d=!1},d(u){u&&b(a),~s&&n[s].d(u)}}}const Ae={gray:"bg-gray-50 dark:bg-gray-800",red:"bg-red-50 dark:bg-gray-800",yellow:"bg-yellow-50 dark:bg-gray-800 ",green:"bg-green-50 dark:bg-gray-800 ",indigo:"bg-indigo-50 dark:bg-gray-800 ",purple:"bg-purple-50 dark:bg-gray-800 ",pink:"bg-pink-50 dark:bg-gray-800 ",blue:"bg-blue-50 dark:bg-gray-800 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-50 dark:bg-gray-800",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-50 dark:bg-gray-800 ",orange:"bg-orange-50 dark:bg-orange-800",none:""};function Re(e,s,r){const a=["tag","color","rounded","border","shadow","node","use","options","role","transition","params","open"];let d=z(s,a),{$$slots:t={},$$scope:n}=s;const o=()=>{};H("background",!0);let{tag:u=d.href?"a":"div"}=s,{color:f="default"}=s,{rounded:i=!1}=s,{border:m=!1}=s,{shadow:k=!1}=s,{node:w=void 0}=s,{use:T=o}=s,{options:O={}}=s,{role:P=void 0}=s,{transition:B=void 0}=s,{params:J={}}=s,{open:j=!0}=s;const L=ve(),ie={gray:"text-gray-800 dark:text-gray-300",red:"text-red-800 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-300",green:"text-green-800 dark:text-green-400",indigo:"text-indigo-800 dark:text-indigo-400",purple:"text-purple-800 dark:text-purple-400",pink:"text-pink-800 dark:text-pink-400",blue:"text-blue-800 dark:text-blue-400",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-800 dark:text-primary-400",orange:"text-orange-800 dark:text-orange-400",none:""},me={gray:"border-gray-300 dark:border-gray-800 divide-gray-300 dark:divide-gray-800",red:"border-red-300 dark:border-red-800 divide-red-300 dark:divide-red-800",yellow:"border-yellow-300 dark:border-yellow-800 divide-yellow-300 dark:divide-yellow-800",green:"border-green-300 dark:border-green-800 divide-green-300 dark:divide-green-800",indigo:"border-indigo-300 dark:border-indigo-800 divide-indigo-300 dark:divide-indigo-800",purple:"border-purple-300 dark:border-purple-800 divide-purple-300 dark:divide-purple-800",pink:"border-pink-300 dark:border-pink-800 divide-pink-300 dark:divide-pink-800",blue:"border-blue-300 dark:border-blue-800 divide-blue-300 dark:divide-blue-800",light:"border-gray-500 divide-gray-500",dark:"border-gray-500 divide-gray-500",default:"border-gray-200 dark:border-gray-700 divide-gray-200 dark:divide-gray-700",dropdown:"border-gray-100 dark:border-gray-600 divide-gray-100 dark:divide-gray-600",navbar:"border-gray-100 dark:border-gray-700 divide-gray-100 dark:divide-gray-700",navbarUl:"border-gray-100 dark:border-gray-700 divide-gray-100 dark:divide-gray-700",form:"border-gray-300 dark:border-gray-700 divide-gray-300 dark:divide-gray-700",primary:"border-primary-500 dark:border-primary-200  divide-primary-500 dark:divide-primary-200 ",orange:"border-orange-300 dark:border-orange-800 divide-orange-300 dark:divide-orange-800",none:""};let Y;function oe(l){g.call(this,e,l)}function fe(l){g.call(this,e,l)}function ke(l){g.call(this,e,l)}function ye(l){g.call(this,e,l)}function ge(l){g.call(this,e,l)}function _e(l){g.call(this,e,l)}function ce(l){g.call(this,e,l)}function pe(l){g.call(this,e,l)}function be(l){g.call(this,e,l)}function he(l){g.call(this,e,l)}function we(l){M[l?"unshift":"push"](()=>{w=l,r(0,w)})}function Ce(l){M[l?"unshift":"push"](()=>{w=l,r(0,w)})}return e.$$set=l=>{r(32,s=E(E({},s),I(l))),r(9,d=z(s,a)),"tag"in l&&r(1,u=l.tag),"color"in l&&r(10,f=l.color),"rounded"in l&&r(11,i=l.rounded),"border"in l&&r(12,m=l.border),"shadow"in l&&r(13,k=l.shadow),"node"in l&&r(0,w=l.node),"use"in l&&r(2,T=l.use),"options"in l&&r(3,O=l.options),"role"in l&&r(4,P=l.role),"transition"in l&&r(5,B=l.transition),"params"in l&&r(6,J=l.params),"open"in l&&r(7,j=l.open),"$$scope"in l&&r(14,n=l.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&128&&L(j?"open":"close"),e.$$.dirty[0]&128&&L("show",j),e.$$.dirty[0]&1024&&r(10,f=f??"default"),e.$$.dirty[0]&1024&&H("color",f),r(8,Y=qe(Ae[f],ie[f],i&&"rounded-lg",m&&"border",me[f],k&&"shadow-md",s.class))},s=I(s),[w,u,T,O,P,B,J,j,Y,d,f,i,m,k,n,t,oe,fe,ke,ye,ge,_e,ce,pe,be,he,we,Ce]}class ds extends je{constructor(s){super(),Ne(this,s,Re,Ue,S,{tag:1,color:10,rounded:11,border:12,shadow:13,node:0,use:2,options:3,role:4,transition:5,params:6,open:7},null,[-1,-1])}}const Se={filename:"",nature:"",column_name:"",data:void 0},Te={data:void 0,filename:"",nature:"",column_name:""},ne={project:"",funder:"",url_project:"",work_package:"",use_case:"",document:"",version_sem:"",authors:[],keywords:[],description:"",notes:"",spatial_coverage:"",license:"CC BY 4.0 https://creativecommons.org/licenses/by/4.0/"},ae={name:"",description:"",inclusion_criteria:"",exclusion_criteria:"",beggining_study_period:new Date,end_study_period:new Date,cohort_definition_inclusion:Se,cohort_definition_exclusion:Te},R={created_dt:new Date,uuid:"",metadata:ne,cohort:ae,entities:[],relationships:[]},y=v(R),Oe=v(0),ts=p(y,e=>e.metadata.use_case),ls=p(y,e=>e.metadata.project),ns=p(y,e=>e.metadata.version_sem),as=p(y,e=>e.metadata.authors),us=p(y,e=>e.cohort.name),is=p(y,e=>e.cohort.inclusion_criteria),ms=p(y,e=>e.cohort.description),Pe=v(0),os=p(y,e=>e.entities),Be=v(0),Je=v(!1),Le=[],Ye=v(Le);function ue(e){for(let s in e)e[s]===null?delete e[s]:(typeof e[s]=="object"||Array.isArray(e[s]))&&(e[s]=ue(e[s]));return e}function ze(e){return{project:e.project||"",funder:e.funder||"",url_project:e.url_project||"",work_package:e.work_package||"",use_case:e.use_case||"",document:e.document||"",version_sem:e.version_sem||"",authors:e.authors||[],keywords:e.keywords||[],description:e.description||"",notes:e.notes||"",spatial_coverage:e.spatial_coverage||"",license:e.license||"CC BY 4.0 https://creativecommons.org/licenses/by/4.0/"}}function K(e){return{filename:(e==null?void 0:e.filename)||"",nature:(e==null?void 0:e.nature)||"",column_name:(e==null?void 0:e.column_name)||"",data:void 0}}function He(e){return{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",inclusion_criteria:(e==null?void 0:e.inclusion_criteria)||"",exclusion_criteria:(e==null?void 0:e.exclusion_criteria)||"",beggining_study_period:new Date(e==null?void 0:e.beggining_study_period)||new Date,end_study_period:new Date(e==null?void 0:e.end_study_period)||new Date,cohort_definition_inclusion:K(e==null?void 0:e.cohort_definition_inclusion),cohort_definition_exclusion:K(e==null?void 0:e.cohort_definition_exclusion)}}function Ie(e){return{data:void 0,column_name:e.column_name||"",filename:e.filename||""}}function Me(e){let s=null;return e!=null&&e.catalog&&(s=Ie(e==null?void 0:e.catalog),(s.column_name==""||s.filename=="")&&(s=null)),{label:(e==null?void 0:e.label)||"",description:(e==null?void 0:e.description)||"",standard_classification:(e==null?void 0:e.standard_classification)||"",format:(e==null?void 0:e.format)||"String",type:(e==null?void 0:e.type)||"Categorical",units:(e==null?void 0:e.units)||"",requirement_level:(e==null?void 0:e.requirement_level)||"Required",characteristic:(e==null?void 0:e.characteristic)||"Observed",catalog_bl:(e==null?void 0:e.catalog_bl)||!1,transformations_from_origin:(e==null?void 0:e.transformations_from_origin)||"",possible_data_source:(e==null?void 0:e.possible_data_source)||"",observations_comments:(e==null?void 0:e.observations_comments)||"",examples:(e==null?void 0:e.examples)||"",catalog:s}}function Ge(e){let s={expression:(e==null?void 0:e.expression)||"",name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||""};if(!(s.expression===""&&s.name===""&&s.description===""))return s}function Ke(e){let s=[];for(let a of e==null?void 0:e.variables)s.push(Me(a));let r=[];for(let a of e==null?void 0:e.rules){let d=Ge(a);d!=null&&r.push(d)}return{name:(e==null?void 0:e.name)||"",time_varying:(e==null?void 0:e.time_varying)||!1,variables:s,rules:r}}function Qe(e){let s=[];for(let r of e)s.push(Ke(r));return s}function Ve(e){return{left_entity:(e==null?void 0:e.left_entity)||"",right_entity:(e==null?void 0:e.right_entity)||"",join_type:(e==null?void 0:e.join_type)||"LEFT JOIN",left_column:(e==null?void 0:e.left_column)||"",right_column:(e==null?void 0:e.right_column)||""}}function We(e){let s=[];for(let r of e)s.push(Ve(r));return s}function fs(e){if(e.target.files.length==0)y.set(R);else{y.set(R);let s=new FileReader,r=[];s.onload=a=>{try{let d=JSON.parse(s.result);d=ue(d);let t=ne,n=ae,o=[],u=[];"metadata"in d?t=ze(d.metadata):r.push(N(q)("header.notification_error_metadata")),"cohort"in d?n=He(d.cohort):r.push(N(q)("header.notification_error_cohort")),"entities"in d?o=Qe(d.entities):r.push(N(q)("header.notification_error_entities")),"relationships"in d?u=We(d.relationships):r.push(N(q)("header.notification_error_relationships"));let f={created_dt:new Date,uuid:"",metadata:t,cohort:n,entities:o,relationships:u};y.set(f),Oe.set(f.metadata.authors.length),Pe.set(f.entities.length),Be.set(f.relationships.length),Je.set(!0)}catch(d){r.push(d.message)}finally{Ye.set(r)}},s.readAsText(e.target.files[0])}}export{ds as F,as as a,rs as b,ms as c,y as d,os as e,Oe as f,ss as g,Be as h,is as i,Je as j,Ye as k,fs as l,Pe as m,us as n,ls as p,ts as u,ns as v};
