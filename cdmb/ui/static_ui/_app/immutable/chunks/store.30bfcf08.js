import{S as he,i as we,s as A,e as C,b as j,v as V,d as b,f as W,g as p,h,V as L,ac as T,R as q,W as Y,L as Ce,a3 as k,w as G,N as z,k as H,l as K,m as M,a8 as F,aa as X,G as y,O as Z,P as v,Q as x,U as $,ab as ee,a1 as se,J as Ne,a5 as I,aq as D}from"./index.835f9034.js";import{c as je}from"./Indicator.svelte_svelte_type_style_lang.a98b1648.js";import{d as g,w as N}from"./index.258591cf.js";import{a as U}from"./runtime.esm.58062527.js";function De(e){let s=e[1],t,u,l=e[1]&&O(e);return{c(){l&&l.c(),t=C()},l(r){l&&l.l(r),t=C()},m(r,n){l&&l.m(r,n),j(r,t,n),u=!0},p(r,n){r[1]?s?A(s,r[1])?(l.d(1),l=O(r),s=r[1],l.c(),l.m(t.parentNode,t)):l.p(r,n):(l=O(r),s=r[1],l.c(),l.m(t.parentNode,t)):s&&(l.d(1),l=null,s=r[1])},i(r){u||(p(l),u=!0)},o(r){b(l),u=!1},d(r){r&&h(t),l&&l.d(r)}}}function Ue(e){let s=e[1],t,u=!1,l,r=e[1]&&R(e);return{c(){r&&r.c(),t=C()},l(n){r&&r.l(n),t=C()},m(n,_){r&&r.m(n,_),j(n,t,_),l=!0},p(n,_){n[1]?s?A(s,n[1])?(r.d(1),r=R(n),s=n[1],r.c(),u&&(u=!1,p(r)),r.m(t.parentNode,t)):(u&&(u=!1,p(r)),r.p(n,_)):(r=R(n),s=n[1],r.c(),p(r),r.m(t.parentNode,t)):s&&(u=!0,V(),b(r,1,1,()=>{r=null,s=n[1],u=!1}),W())},i(n){l||(p(r),l=!0)},o(n){b(r),l=!1},d(n){n&&h(t),r&&r.d(n)}}}function O(e){let s,t,u,l,r;const n=e[13].default,_=z(n,e,e[12],null);let a=[e[7],{class:e[6]}],i={};for(let m=0;m<a.length;m+=1)i=q(i,a[m]);return{c(){s=H(e[1]),_&&_.c(),this.h()},l(m){s=K(m,(e[1]||"null").toUpperCase(),{class:!0});var o=M(s);_&&_.l(o),o.forEach(h),this.h()},h(){F(e[1])(s,i)},m(m,o){j(m,s,o),_&&_.m(s,null),e[25](s),u=!0,l||(r=[X(t=e[4].call(null,s,e[5])),y(s,"click",e[19]),y(s,"mouseenter",e[20]),y(s,"mouseleave",e[21]),y(s,"focusin",e[22]),y(s,"focusout",e[23])],l=!0)},p(m,o){_&&_.p&&(!u||o&4096)&&Z(_,n,m,m[12],u?x(n,m[12],o,null):v(m[12]),null),F(m[1])(s,i=$(a,[o&128&&m[7],(!u||o&64)&&{class:m[6]}])),t&&ee(t.update)&&o&32&&t.update.call(null,m[5])},i(m){u||(p(_,m),u=!0)},o(m){b(_,m),u=!1},d(m){m&&h(s),_&&_.d(m),e[25](null),l=!1,se(r)}}}function R(e){let s,t,u,l,r,n;const _=e[13].default,a=z(_,e,e[12],null);let i=[e[7],{class:e[6]}],m={};for(let o=0;o<i.length;o+=1)m=q(m,i[o]);return{c(){s=H(e[1]),a&&a.c(),this.h()},l(o){s=K(o,(e[1]||"null").toUpperCase(),{class:!0});var c=M(s);a&&a.l(c),c.forEach(h),this.h()},h(){F(e[1])(s,m)},m(o,c){j(o,s,c),a&&a.m(s,null),e[24](s),l=!0,r||(n=[X(t=e[4].call(null,s,e[5])),y(s,"click",e[14]),y(s,"mouseenter",e[15]),y(s,"mouseleave",e[16]),y(s,"focusin",e[17]),y(s,"focusout",e[18])],r=!0)},p(o,c){e=o,a&&a.p&&(!l||c&4096)&&Z(a,_,e,e[12],l?x(_,e[12],c,null):v(e[12]),null),F(e[1])(s,m=$(i,[c&128&&e[7],(!l||c&64)&&{class:e[6]}])),t&&ee(t.update)&&c&32&&t.update.call(null,e[5])},i(o){l||(p(a,o),Ne(()=>{l&&(u||(u=I(s,e[2],e[3],!0)),u.run(1))}),l=!0)},o(o){b(a,o),u||(u=I(s,e[2],e[3],!1)),u.run(0),l=!1},d(o){o&&h(s),a&&a.d(o),e[24](null),o&&u&&u.end(),r=!1,se(n)}}}function qe(e){let s,t,u,l;const r=[Ue,De],n=[];function _(a,i){return a[2]?0:1}return s=_(e),t=n[s]=r[s](e),{c(){t.c(),u=C()},l(a){t.l(a),u=C()},m(a,i){n[s].m(a,i),j(a,u,i),l=!0},p(a,[i]){let m=s;s=_(a),s===m?n[s].p(a,i):(V(),b(n[m],1,1,()=>{n[m]=null}),W(),t=n[s],t?t.p(a,i):(t=n[s]=r[s](a),t.c()),p(t,1),t.m(u.parentNode,u))},i(a){l||(p(t),l=!0)},o(a){b(t),l=!1},d(a){n[s].d(a),a&&h(u)}}}function Fe(e,s,t){const u=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let l=L(s,u),{$$slots:r={},$$scope:n}=s;T("background",!0);let{tag:_="div"}=s,{color:a="default"}=s,{rounded:i=!1}=s,{border:m=!1}=s,{shadow:o=!1}=s,{transition:c=void 0}=s,{params:E={}}=s,{node:w=void 0}=s,{use:J=Ce}=s,{options:P={}}=s;const de={gray:"bg-gray-50 dark:bg-gray-800",red:"bg-red-50 dark:bg-gray-800",yellow:"bg-yellow-50 dark:bg-gray-800 ",green:"bg-green-50 dark:bg-gray-800 ",indigo:"bg-indigo-50 dark:bg-gray-800 ",purple:"bg-purple-50 dark:bg-gray-800 ",pink:"bg-pink-50 dark:bg-gray-800 ",blue:"bg-blue-50 dark:bg-gray-800 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-50 dark:bg-gray-800",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-50 dark:bg-gray-800 ",none:""},ne={gray:"text-gray-800 dark:text-gray-300",red:"text-red-800 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-300",green:"text-green-800 dark:text-green-400",indigo:"text-indigo-800 dark:text-indigo-400",purple:"text-purple-800 dark:text-purple-400",pink:"text-pink-800 dark:text-pink-400",blue:"text-blue-800 dark:text-blue-400",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-800 dark:text-primary-400",none:""},ae={gray:"border-gray-300 dark:border-gray-800",red:"border-red-300 dark:border-red-800",yellow:"border-yellow-300 dark:border-yellow-800",green:"border-green-300 dark:border-green-800",indigo:"border-indigo-300 dark:border-indigo-800",purple:"border-purple-300 dark:border-purple-800",pink:"border-pink-300 dark:border-pink-800",blue:"border-blue-300 dark:border-blue-800",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let B;function ue(d){k.call(this,e,d)}function me(d){k.call(this,e,d)}function oe(d){k.call(this,e,d)}function _e(d){k.call(this,e,d)}function ie(d){k.call(this,e,d)}function ce(d){k.call(this,e,d)}function fe(d){k.call(this,e,d)}function ke(d){k.call(this,e,d)}function ye(d){k.call(this,e,d)}function pe(d){k.call(this,e,d)}function ge(d){G[d?"unshift":"push"](()=>{w=d,t(0,w)})}function be(d){G[d?"unshift":"push"](()=>{w=d,t(0,w)})}return e.$$set=d=>{t(29,s=q(q({},s),Y(d))),t(7,l=L(s,u)),"tag"in d&&t(1,_=d.tag),"color"in d&&t(8,a=d.color),"rounded"in d&&t(9,i=d.rounded),"border"in d&&t(10,m=d.border),"shadow"in d&&t(11,o=d.shadow),"transition"in d&&t(2,c=d.transition),"params"in d&&t(3,E=d.params),"node"in d&&t(0,w=d.node),"use"in d&&t(4,J=d.use),"options"in d&&t(5,P=d.options),"$$scope"in d&&t(12,n=d.$$scope)},e.$$.update=()=>{e.$$.dirty&256&&T("color",a),t(6,B=je(de[a],ne[a],i&&(a==="dropdown"?"rounded":"rounded-lg"),m&&"border",ae[a],o&&"shadow-md",s.class))},s=Y(s),[w,_,c,E,J,P,B,l,a,i,m,o,n,r,ue,me,oe,_e,ie,ce,fe,ke,ye,pe,ge,be]}class Ze extends he{constructor(s){super(),we(this,s,Fe,qe,A,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}const Oe={filename:"",nature:"",column_name:"",data:void 0},Re={data:void 0,filename:"",nature:"",column_name:""},te={project:"",funder:"",url_project:"",work_package:"",use_case:"",document:"",version_sem:"",authors:[],keywords:[],description:"",notes:"",spatial_coverage:"",license:"CC BY 4.0 https://creativecommons.org/licenses/by/4.0/"},le={name:"",description:"",inclusion_criteria:"",exclusion_criteria:"",beggining_study_period:new Date,end_study_period:new Date,cohort_definition_inclusion:Oe,cohort_definition_exclusion:Re},S={created_dt:new Date,uuid:"",metadata:te,cohort:le,entities:[],relationships:[]},f=N(S),Se=N(0),ve=g(f,e=>e.metadata.use_case),xe=g(f,e=>e.metadata.project),$e=g(f,e=>e.metadata.version_sem),es=g(f,e=>e.metadata.authors),ss=g(f,e=>e.cohort.name),ts=g(f,e=>e.cohort.inclusion_criteria),ls=g(f,e=>e.cohort.description),Ae=N(0),rs=g(f,e=>e.entities),Ee=N(0),Je=N(!1),Pe=[],Be=N(Pe);function re(e){for(let s in e)e[s]===null?delete e[s]:(typeof e[s]=="object"||Array.isArray(e[s]))&&(e[s]=re(e[s]));return e}function Le(e){return{project:e.project||"",funder:e.funder||"",url_project:e.url_project||"",work_package:e.work_package||"",use_case:e.use_case||"",document:e.document||"",version_sem:e.version_sem||"",authors:e.authors||[],keywords:e.keywords||[],description:e.description||"",notes:e.notes||"",spatial_coverage:e.spatial_coverage||"",license:e.license||"CC BY 4.0 https://creativecommons.org/licenses/by/4.0/"}}function Q(e){return{filename:(e==null?void 0:e.filename)||"",nature:(e==null?void 0:e.nature)||"",column_name:(e==null?void 0:e.column_name)||"",data:void 0}}function Te(e){return{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",inclusion_criteria:(e==null?void 0:e.inclusion_criteria)||"",exclusion_criteria:(e==null?void 0:e.exclusion_criteria)||"",beggining_study_period:new Date(e==null?void 0:e.beggining_study_period)||new Date,end_study_period:new Date(e==null?void 0:e.end_study_period)||new Date,cohort_definition_inclusion:Q(e==null?void 0:e.cohort_definition_inclusion),cohort_definition_exclusion:Q(e==null?void 0:e.cohort_definition_exclusion)}}function Ye(e){return{data:void 0,column_name:e.column_name||"",filename:e.filename||""}}function Ge(e){let s=null;return e!=null&&e.catalog&&(s=Ye(e==null?void 0:e.catalog),(s.column_name==""||s.filename=="")&&(s=null)),{label:(e==null?void 0:e.label)||"",description:(e==null?void 0:e.description)||"",standard_classification:(e==null?void 0:e.standard_classification)||"",format:(e==null?void 0:e.format)||"String",type:(e==null?void 0:e.type)||"Categorical",units:(e==null?void 0:e.units)||"",requirement_level:(e==null?void 0:e.requirement_level)||"Required",characteristic:(e==null?void 0:e.characteristic)||"Observed",catalog_bl:(e==null?void 0:e.catalog_bl)||!1,transformations_from_origin:(e==null?void 0:e.transformations_from_origin)||"",possible_data_source:(e==null?void 0:e.possible_data_source)||"",observations_comments:(e==null?void 0:e.observations_comments)||"",examples:(e==null?void 0:e.examples)||"",catalog:s}}function Ie(e){let s={expression:(e==null?void 0:e.expression)||"",name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||""};if(!(s.expression===""&&s.name===""&&s.description===""))return s}function Qe(e){let s=[];for(let u of e==null?void 0:e.variables)s.push(Ge(u));let t=[];for(let u of e==null?void 0:e.rules){let l=Ie(u);l!=null&&t.push(l)}return{name:(e==null?void 0:e.name)||"",time_varying:(e==null?void 0:e.time_varying)||!1,variables:s,rules:t}}function Ve(e){let s=[];for(let t of e)s.push(Qe(t));return s}function We(e){return{left_entity:(e==null?void 0:e.left_entity)||"",right_entity:(e==null?void 0:e.right_entity)||"",join_type:(e==null?void 0:e.join_type)||"LEFT JOIN",left_column:(e==null?void 0:e.left_column)||"",right_column:(e==null?void 0:e.right_column)||""}}function ze(e){let s=[];for(let t of e)s.push(We(t));return s}function ds(e){if(e.target.files.length==0)f.set(S);else{f.set(S);let s=new FileReader,t=[];s.onload=u=>{try{let l=JSON.parse(s.result);l=re(l);let r=te,n=le,_=[],a=[];"metadata"in l?r=Le(l.metadata):t.push(D(U)("header.notification_error_metadata")),"cohort"in l?n=Te(l.cohort):t.push(D(U)("header.notification_error_cohort")),"entities"in l?_=Ve(l.entities):t.push(D(U)("header.notification_error_entities")),"relationships"in l?a=ze(l.relationships):t.push(D(U)("header.notification_error_relationships"));let i={created_dt:new Date,uuid:"",metadata:r,cohort:n,entities:_,relationships:a};f.set(i),Se.set(i.metadata.authors.length),Ae.set(i.entities.length),Ee.set(i.relationships.length),Je.set(!0)}catch(l){t.push(l.message)}finally{Be.set(t)}},s.readAsText(e.target.files[0])}}export{Ze as F,Ae as a,Se as b,f as c,ds as d,rs as e,ss as f,ls as g,xe as h,ts as i,es as j,Be as l,Ee as n,Je as p,ve as u,$e as v};
