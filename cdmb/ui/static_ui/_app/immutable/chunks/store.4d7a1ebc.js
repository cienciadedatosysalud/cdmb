import{S as ge,i as be,s as R,e as C,b as j,v as K,d as b,f as L,g as p,h,V as B,ab as I,R as D,W as J,K as he,a3 as k,w as T,N as Q,k as V,l as W,m as z,ao as U,a9 as H,G as y,O as M,P as X,Q as Z,U as v,aa as x,a1 as $,I as we,a5 as Y}from"./index.d8ca07a9.js";import{c as Ce}from"./Indicator.svelte_svelte_type_style_lang.e2c519f7.js";import{w as N,d as g}from"./index.5b757cee.js";function Ne(e){let s=e[1],t,u,l=e[1]&&q(e);return{c(){l&&l.c(),t=C()},l(r){l&&l.l(r),t=C()},m(r,n){l&&l.m(r,n),j(r,t,n),u=!0},p(r,n){r[1]?s?R(s,r[1])?(l.d(1),l=q(r),s=r[1],l.c(),l.m(t.parentNode,t)):l.p(r,n):(l=q(r),s=r[1],l.c(),l.m(t.parentNode,t)):s&&(l.d(1),l=null,s=r[1])},i(r){u||(p(l),u=!0)},o(r){b(l),u=!1},d(r){r&&h(t),l&&l.d(r)}}}function je(e){let s=e[1],t,u=!1,l,r=e[1]&&F(e);return{c(){r&&r.c(),t=C()},l(n){r&&r.l(n),t=C()},m(n,i){r&&r.m(n,i),j(n,t,i),l=!0},p(n,i){n[1]?s?R(s,n[1])?(r.d(1),r=F(n),s=n[1],r.c(),u&&(u=!1,p(r)),r.m(t.parentNode,t)):(u&&(u=!1,p(r)),r.p(n,i)):(r=F(n),s=n[1],r.c(),p(r),r.m(t.parentNode,t)):s&&(u=!0,K(),b(r,1,1,()=>{r=null,s=n[1],u=!1}),L())},i(n){l||(p(r),l=!0)},o(n){b(r),l=!1},d(n){n&&h(t),r&&r.d(n)}}}function q(e){let s,t,u,l,r;const n=e[13].default,i=Q(n,e,e[12],null);let a=[e[7],{class:e[6]}],_={};for(let m=0;m<a.length;m+=1)_=D(_,a[m]);return{c(){s=V(e[1]),i&&i.c(),this.h()},l(m){s=W(m,(e[1]||"null").toUpperCase(),{class:!0});var o=z(s);i&&i.l(o),o.forEach(h),this.h()},h(){U(e[1])(s,_)},m(m,o){j(m,s,o),i&&i.m(s,null),e[25](s),u=!0,l||(r=[H(t=e[4].call(null,s,e[5])),y(s,"click",e[19]),y(s,"mouseenter",e[20]),y(s,"mouseleave",e[21]),y(s,"focusin",e[22]),y(s,"focusout",e[23])],l=!0)},p(m,o){i&&i.p&&(!u||o&4096)&&M(i,n,m,m[12],u?Z(n,m[12],o,null):X(m[12]),null),U(m[1])(s,_=v(a,[o&128&&m[7],(!u||o&64)&&{class:m[6]}])),t&&x(t.update)&&o&32&&t.update.call(null,m[5])},i(m){u||(p(i,m),u=!0)},o(m){b(i,m),u=!1},d(m){m&&h(s),i&&i.d(m),e[25](null),l=!1,$(r)}}}function F(e){let s,t,u,l,r,n;const i=e[13].default,a=Q(i,e,e[12],null);let _=[e[7],{class:e[6]}],m={};for(let o=0;o<_.length;o+=1)m=D(m,_[o]);return{c(){s=V(e[1]),a&&a.c(),this.h()},l(o){s=W(o,(e[1]||"null").toUpperCase(),{class:!0});var f=z(s);a&&a.l(f),f.forEach(h),this.h()},h(){U(e[1])(s,m)},m(o,f){j(o,s,f),a&&a.m(s,null),e[24](s),l=!0,r||(n=[H(t=e[4].call(null,s,e[5])),y(s,"click",e[14]),y(s,"mouseenter",e[15]),y(s,"mouseleave",e[16]),y(s,"focusin",e[17]),y(s,"focusout",e[18])],r=!0)},p(o,f){e=o,a&&a.p&&(!l||f&4096)&&M(a,i,e,e[12],l?Z(i,e[12],f,null):X(e[12]),null),U(e[1])(s,m=v(_,[f&128&&e[7],(!l||f&64)&&{class:e[6]}])),t&&x(t.update)&&f&32&&t.update.call(null,e[5])},i(o){l||(p(a,o),we(()=>{l&&(u||(u=Y(s,e[2],e[3],!0)),u.run(1))}),l=!0)},o(o){b(a,o),u||(u=Y(s,e[2],e[3],!1)),u.run(0),l=!1},d(o){o&&h(s),a&&a.d(o),e[24](null),o&&u&&u.end(),r=!1,$(n)}}}function De(e){let s,t,u,l;const r=[je,Ne],n=[];function i(a,_){return a[2]?0:1}return s=i(e),t=n[s]=r[s](e),{c(){t.c(),u=C()},l(a){t.l(a),u=C()},m(a,_){n[s].m(a,_),j(a,u,_),l=!0},p(a,[_]){let m=s;s=i(a),s===m?n[s].p(a,_):(K(),b(n[m],1,1,()=>{n[m]=null}),L(),t=n[s],t?t.p(a,_):(t=n[s]=r[s](a),t.c()),p(t,1),t.m(u.parentNode,u))},i(a){l||(p(t),l=!0)},o(a){b(t),l=!1},d(a){n[s].d(a),a&&h(u)}}}function Ue(e,s,t){const u=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let l=B(s,u),{$$slots:r={},$$scope:n}=s;I("background",!0);let{tag:i="div"}=s,{color:a="default"}=s,{rounded:_=!1}=s,{border:m=!1}=s,{shadow:o=!1}=s,{transition:f=void 0}=s,{params:S={}}=s,{node:w=void 0}=s,{use:A=he}=s,{options:E={}}=s;const le={gray:"bg-gray-50 dark:bg-gray-800",red:"bg-red-50 dark:bg-gray-800",yellow:"bg-yellow-50 dark:bg-gray-800 ",green:"bg-green-50 dark:bg-gray-800 ",indigo:"bg-indigo-50 dark:bg-gray-800 ",purple:"bg-purple-50 dark:bg-gray-800 ",pink:"bg-pink-50 dark:bg-gray-800 ",blue:"bg-blue-50 dark:bg-gray-800 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-50 dark:bg-gray-800",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-50 dark:bg-gray-800 ",none:""},re={gray:"text-gray-800 dark:text-gray-300",red:"text-red-800 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-300",green:"text-green-800 dark:text-green-400",indigo:"text-indigo-800 dark:text-indigo-400",purple:"text-purple-800 dark:text-purple-400",pink:"text-pink-800 dark:text-pink-400",blue:"text-blue-800 dark:text-blue-400",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-800 dark:text-primary-400",none:""},de={gray:"border-gray-300 dark:border-gray-800",red:"border-red-300 dark:border-red-800",yellow:"border-yellow-300 dark:border-yellow-800",green:"border-green-300 dark:border-green-800",indigo:"border-indigo-300 dark:border-indigo-800",purple:"border-purple-300 dark:border-purple-800",pink:"border-pink-300 dark:border-pink-800",blue:"border-blue-300 dark:border-blue-800",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let P;function ne(d){k.call(this,e,d)}function ae(d){k.call(this,e,d)}function ue(d){k.call(this,e,d)}function me(d){k.call(this,e,d)}function oe(d){k.call(this,e,d)}function ie(d){k.call(this,e,d)}function _e(d){k.call(this,e,d)}function fe(d){k.call(this,e,d)}function ce(d){k.call(this,e,d)}function ke(d){k.call(this,e,d)}function ye(d){T[d?"unshift":"push"](()=>{w=d,t(0,w)})}function pe(d){T[d?"unshift":"push"](()=>{w=d,t(0,w)})}return e.$$set=d=>{t(29,s=D(D({},s),J(d))),t(7,l=B(s,u)),"tag"in d&&t(1,i=d.tag),"color"in d&&t(8,a=d.color),"rounded"in d&&t(9,_=d.rounded),"border"in d&&t(10,m=d.border),"shadow"in d&&t(11,o=d.shadow),"transition"in d&&t(2,f=d.transition),"params"in d&&t(3,S=d.params),"node"in d&&t(0,w=d.node),"use"in d&&t(4,A=d.use),"options"in d&&t(5,E=d.options),"$$scope"in d&&t(12,n=d.$$scope)},e.$$.update=()=>{e.$$.dirty&256&&I("color",a),t(6,P=Ce(le[a],re[a],_&&(a==="dropdown"?"rounded":"rounded-lg"),m&&"border",de[a],o&&"shadow-md",s.class))},s=J(s),[w,i,f,S,A,E,P,l,a,_,m,o,n,r,ne,ae,ue,me,oe,ie,_e,fe,ce,ke,ye,pe]}class He extends ge{constructor(s){super(),be(this,s,Ue,De,R,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}const qe={filename:"",nature:"",column_name:"",data:void 0},Fe={data:void 0,filename:"",nature:"",column_name:""},ee={project:"",funder:"",url_project:"",work_package:"",use_case:"",document:"",version_sem:"",authors:[],keywords:[],description:"",notes:"",spatial_coverage:"",license:"CC BY 4.0 https://creativecommons.org/licenses/by/4.0/"},se={name:"",description:"",inclusion_criteria:"",exclusion_criteria:"",beggining_study_period:new Date,end_study_period:new Date,cohort_definition_inclusion:qe,cohort_definition_exclusion:Fe},O={created_dt:new Date,uuid:"",metadata:ee,cohort:se,entities:[],relationships:[]},c=N(O),Oe=N(0),Me=g(c,e=>e.metadata.use_case),Xe=g(c,e=>e.metadata.project),Ze=g(c,e=>e.metadata.version_sem),ve=g(c,e=>e.metadata.authors),xe=g(c,e=>e.cohort.name),$e=g(c,e=>e.cohort.inclusion_criteria),es=g(c,e=>e.cohort.description),Re=N(0),ss=g(c,e=>e.entities),Se=N(0),Ae=N(!1),Ee=[],Pe=N(Ee);function te(e){for(let s in e)e[s]===null?delete e[s]:(typeof e[s]=="object"||Array.isArray(e[s]))&&(e[s]=te(e[s]));return e}function Be(e){return{project:e.project||"",funder:e.funder||"",url_project:e.url_project||"",work_package:e.work_package||"",use_case:e.use_case||"",document:e.document||"",version_sem:e.version_sem||"",authors:e.authors||[],keywords:e.keywords||[],description:e.description||"",notes:e.notes||"",spatial_coverage:e.spatial_coverage||"",license:e.license||"CC BY 4.0 https://creativecommons.org/licenses/by/4.0/"}}function G(e){return{filename:(e==null?void 0:e.filename)||"",nature:(e==null?void 0:e.nature)||"",column_name:(e==null?void 0:e.column_name)||"",data:void 0}}function Ie(e){return{name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",inclusion_criteria:(e==null?void 0:e.inclusion_criteria)||"",exclusion_criteria:(e==null?void 0:e.exclusion_criteria)||"",beggining_study_period:new Date(e==null?void 0:e.beggining_study_period)||new Date,end_study_period:new Date(e==null?void 0:e.end_study_period)||new Date,cohort_definition_inclusion:G(e==null?void 0:e.cohort_definition_inclusion),cohort_definition_exclusion:G(e==null?void 0:e.cohort_definition_exclusion)}}function Je(e){return{data:void 0,column_name:e.column_name||"",filename:e.filename||""}}function Te(e){let s=null;return e!=null&&e.catalog&&(s=Je(e==null?void 0:e.catalog),(s.column_name==""||s.filename=="")&&(s=null)),{label:(e==null?void 0:e.label)||"",description:(e==null?void 0:e.description)||"",standard_classification:(e==null?void 0:e.standard_classification)||"",format:(e==null?void 0:e.format)||"String",type:(e==null?void 0:e.type)||"Categorical",units:(e==null?void 0:e.units)||"",requirement_level:(e==null?void 0:e.requirement_level)||"Required",characteristic:(e==null?void 0:e.characteristic)||"Observed",catalog_bl:(e==null?void 0:e.catalog_bl)||!1,transformations_from_origin:(e==null?void 0:e.transformations_from_origin)||"",possible_data_source:(e==null?void 0:e.possible_data_source)||"",observations_comments:(e==null?void 0:e.observations_comments)||"",examples:(e==null?void 0:e.examples)||"",catalog:s}}function Ye(e){let s={expression:(e==null?void 0:e.expression)||"",name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||""};if(!(s.expression===""&&s.name===""&&s.description===""))return s}function Ge(e){let s=[];for(let u of e==null?void 0:e.variables)s.push(Te(u));let t=[];for(let u of e==null?void 0:e.rules){let l=Ye(u);l!=null&&t.push(l)}return{name:(e==null?void 0:e.name)||"",time_varying:(e==null?void 0:e.time_varying)||!1,variables:s,rules:t}}function Ke(e){let s=[];for(let t of e)s.push(Ge(t));return s}function Le(e){return{left_entity:(e==null?void 0:e.left_entity)||"",right_entity:(e==null?void 0:e.right_entity)||"",join_type:(e==null?void 0:e.join_type)||"LEFT JOIN",left_column:(e==null?void 0:e.left_column)||"",right_column:(e==null?void 0:e.right_column)||""}}function Qe(e){let s=[];for(let t of e)s.push(Le(t));return s}function ts(e){if(e.target.files.length==0)c.set(O);else{c.set(O);let s=new FileReader,t=[];s.onload=u=>{try{let l=JSON.parse(s.result);l=te(l);let r=ee,n=se,i=[],a=[];"metadata"in l?r=Be(l.metadata):t.push("No information about 'metadata' was found in the configuration file provided."),"cohort"in l?n=Ie(l.cohort):t.push("No information about 'cohort' was found in the configuration file provided."),"entities"in l?i=Ke(l.entities):t.push("No information about 'entities' was found in the configuration file provided."),"relationships"in l?a=Qe(l.relationships):t.push("No information about 'relationships' was found in the configuration file provided.");let _={created_dt:new Date,uuid:"",metadata:r,cohort:n,entities:i,relationships:a};c.set(_),Oe.set(_.metadata.authors.length),Re.set(_.entities.length),Se.set(_.relationships.length),Ae.set(!0)}catch(l){t.push(l.message)}finally{Pe.set(t)}},s.readAsText(e.target.files[0])}}export{He as F,Re as a,Oe as b,c,ts as d,ss as e,xe as f,es as g,Xe as h,$e as i,ve as j,Pe as l,Se as n,Ae as p,Me as u,Ze as v};
